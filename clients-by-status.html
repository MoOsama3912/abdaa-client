<h2>العملاء حسب الحالة</h2>
<div id="clients-list"></div>

<script src="config.js"></script>
<script>
  (async function(){
    const urlParams = new URLSearchParams(window.location.search);
    const status = urlParams.get('status');
    try {
      const res = await fetch(`${window.API_BASE || 'http://localhost:5000'}/clients?status=${encodeURIComponent(status)}`);
      if (!res.ok) throw new Error('Failed to load');
      const data = await res.json();
      const container = document.getElementById('clients-list');
      if (!container) return;
      data.forEach(client => {
        const div = document.createElement('div');
        div.textContent = `${client.name} - ${client.phone}`;
        container.appendChild(div);
      });
    } catch (err) {
      console.error(err);
    }
  })();
</script>
